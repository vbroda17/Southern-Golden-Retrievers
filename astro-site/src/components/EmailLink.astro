---
// src/components/EmailLink.astro
// Reusable email link component with copy functionality

import { SITE_CONFIG } from '../config.js';

interface Props {
  subject?: string;
  body?: string;
  text?: string;
  showCopy?: boolean; // Show copy button
}

const { 
  subject = "Inquiry About Golden Retriever Puppies",
  body = "",
  text = SITE_CONFIG.email,
  showCopy = false
} = Astro.props;

// Build mailto URL (still available as backup)
const params = new URLSearchParams();
if (subject) params.set('subject', subject);
if (body) params.set('body', body);

const mailtoUrl = `mailto:${SITE_CONFIG.email}${params.toString() ? '?' + params.toString() : ''}`;
---

{showCopy ? (
  <span class="email-with-copy">
    <a href={mailtoUrl} class="email-link">{text}</a>
    <button class="copy-btn" data-email={SITE_CONFIG.email} title="Copy email address">
      ðŸ“‹
    </button>
  </span>
) : (
  <a href={mailtoUrl} class="email-link">{text}</a>
)}
